# 開発ルール

## クラス名

アッパーキャメルケースとする

## メソッド名

ローワーキャメルとする。

## 変数名

原則としてローワーキャメルケースとする。
アプリケーション外とのインターフェース部分などにおいて、当ルールによって著しく可読性を損なう場合、適切な記法で記述すること。

## URI(ルーティング)

### URIの命名方針について

+ 単純な単一テーブルに関するCRUDは、テーブルに紐づくモデルの複数形を基にして`Route::resource()`とする。
+ テーブル間の関連を操作する処理は階層化して表現する。(UsersとBooksが多対多の場合、`users/1/books`など)
+ 可能な限り単一単語で階層化する。難しい場合は、単語間はハイフン`-`で連結する。(正規社員登録：`regular-employees/create`)

## コントローラー

### コントローラーの命名方針について

+ 原則として、単数形名詞(モデル名など)+ Controllerとする。複数形名詞は用いない。
+ 分割する必要が発生した場合、動詞+形容詞+名詞+Controllerとする。

## CRUD関連

### 方針

+ 原則として、ユニーク制約をかけるカラム（コードなど）およびカラムの組み合わせは変更不可とする。

## マイグレーション

### テーブル名について

+ 全てアルファベット小文字
+ 対応するモデルの複数形(iesや不規則変化、単複同形に注意)
+ 他モデルと親子関係(ヘッダ-明細関係)テーブルにおいて的確な単語がない場合、親モデルの単数形_子モデルの複数形とする
+ 中間(多対多関係)テーブルは的確な単語がない場合、元となるテーブルの単数形_単数形とする
+ テーブルの関連を示す以外に名詞_名詞としない。単一の名詞による呼称が的確とならない場合は形容詞_名詞とすること。(例：社員では不的確で正規社員としたい場合 employee→regular_employees) どうしても名詞で修飾する必要がある場合、`~ise`や`~al`といった接尾辞を付与し名詞的活用でないことを明示すること
+ ○○指図、○○実績、○○計画、○○予定などといったトランザクション系の定型句についてはそれぞれ受動態で修飾する。
    | 定型句 | 英単語 | 例 |
    | :--: | :--: | :--: |
    | 指図・指示 | instructed | 出荷指図: instructed_shipments |
    | 実績 | recorded | 入荷実績: recorded_arrives |
    | 計画 | planed | 生産計画:planed_productions |
    | 予定 | scheduled | 出金予定:scheduled_payments |
+ その他、定型的な名詞を形容詞化し、識別のために修飾的に使われる名詞を主とすることを検討する。(受注,発注:sales_order, parchase_order → ordered_sales, ordered_parchases)

### テーブル作成時

#### ファイル作成コマンド

```shell
php artisan make:migration create_{テーブル名}_table --create={テーブル名}
```

### テーブル修正時

#### カラム追加コマンド

```shell
php artisan make:migration add_{テーブル名}_{カラム名} --create={テーブル名}
```

#### カラム修正コマンド

```shell
php artisan make:migration modifiy_{テーブル名}_{カラム名} --create={テーブル名}
```

原則として、既存テーブルの修正は1ファイル1カラムとする。

## パッケージ関連

+ 必要でない`composer update`や`npm update`などは行わないこと。  
これらコマンドは、原則としてパッケージ名とバージョンを指定したうえで、最小限の影響範囲でしようすること。  
+ 新規にパッケージをインストールする場合は、lockファイルもコミットすること。

## テストコード関連

Laravelの機能を有効にしたい場合(Fakerとか諸々)は`uses(Tests\TestCase::class)`を記述する.
`befoareAll()`時点ではクラスが作成されていないので、上記`TestCase`を`use()`しても適用されていない。
